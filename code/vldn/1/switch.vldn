pressed = get_current_value()
now = uptime()

if (pressed == 1) {
    set_state("last_change_time_ms", now)
    set_output("on", true)
    set_output("off", false)
} else {
    diff_ms = uptime() - get_state("last_change_time_ms")
    
    set_output("toggle", !get_output("toggle"))
    set_output("on", false)
    set_output("off", true)
}
